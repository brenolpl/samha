<mat-card class="mat-elevation-z8 m-auto col-11 mt-5 mb-5">
  <mat-card-title>
    <mat-toolbar color="accent">Cadastrar Disciplina</mat-toolbar>
  </mat-card-title>

  <mat-card-content class="mt-5">
    <form [formGroup]="form">
        <samha-autocomplete-field [resource]="'curso'" [control]="cursoControl" [label]="'Curso'"></samha-autocomplete-field>

      <div *ngIf="cursoControl.value">
        <mat-form-field appearance="outline" class="d-block">
          <mat-label>Matriz Curricular</mat-label>
          <mat-select *ngIf="matriz$ | async as matrizes; else loading" formControlName="matriz" [compareWith]="compareMatrizFunction">
            <mat-option *ngFor="let matriz of matrizes.listMap" [value]="matriz">{{matriz.nome}}</mat-option>
          </mat-select>
          <ng-template #loading>
            <mat-select [disabled]="true"></mat-select>
          </ng-template>
        </mat-form-field>

        <mat-form-field appearance="outline" class="d-block">
          <mat-label>Nome</mat-label>
          <input matInput type="text" formControlName="nome">
        </mat-form-field>

        <mat-form-field appearance="outline" class="d-block">
          <mat-label>Sigla</mat-label>
          <input matInput type="text" formControlName="sigla">
        </mat-form-field>

        <mat-form-field appearance="outline" class="d-block">
          <mat-label>Tipo</mat-label>
          <mat-select formControlName="tipo" [compareWith]="compareFunction">
            <mat-option [value]="'Obrigatória'">Obrigatória</mat-option>
            <mat-option [value]="'Optativa'">Optativa</mat-option>
            <mat-option [value]="'Especial'">Especial</mat-option>
          </mat-select>

        </mat-form-field>

        <mat-form-field appearance="outline" class="d-block">
          <mat-label>Carga Horária</mat-label>
          <input matInput type="number" formControlName="cargaHoraria">
          <mat-hint *ngIf="form.get('cargaHoraria').invalid && form.get('cargaHoraria').touched">Mínimo 15 e máximo 120</mat-hint>
        </mat-form-field>

        <mat-form-field appearance="outline" class="d-block">
          <mat-label>Quantidade de Aulas</mat-label>
          <input matInput type="number" formControlName="qtAulas">
        </mat-form-field>

        <mat-form-field appearance="outline" class="d-block">
          <mat-label>Período</mat-label>
          <input matInput type="number" formControlName="periodo">
        </mat-form-field>
      </div>
    </form>
  </mat-card-content>

  <mat-card-actions class="d-flex justify-content-end">
    <button mat-button type="submit" (click)="salvar()">Salvar</button>
  </mat-card-actions>
</mat-card>
